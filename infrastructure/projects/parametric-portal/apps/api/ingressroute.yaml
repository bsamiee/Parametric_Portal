# --- API INGRESSROUTE ---------------------------------------------------------
# Domain: api.parametric-portal.com
# To add a new app with different domain, copy this pattern to your app folder
apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
  name: api-https
  labels:
    app.kubernetes.io/name: api
    app.kubernetes.io/component: ingress
spec:
  entryPoints:
    - websecure
  routes:
    - match: Host(`api.parametric-portal.com`)
      kind: Rule
      priority: 100
      middlewares:
        - name: api-middleware-chain
      services:
        - kind: Service
          name: api
          port: 4000
          passHostHeader: true
  tls:
    secretName: parametric-portal-tls
    options:
      name: default
