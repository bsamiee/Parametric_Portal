# Doppler-to-Pulumi mapping for Parametric Portal
# This file documents the secrets platform configuration.
# It is NOT consumed by any CLI tool -- it exists for reference.

project: parametric
description: Parametric Portal infrastructure and runtime secrets

environments:
  dev:
    doppler_config: dev
    pulumi_stack: dev
    description: Development environment
    secrets:
      - PULUMI_CONFIG_PASSPHRASE  # Pulumi state encryption (generated by bootstrap.sh)
      - POSTGRES_PASSWORD
      - REDIS_PASSWORD
      - STORAGE_ACCESS_KEY_ID
      - STORAGE_SECRET_ACCESS_KEY
      - ENCRYPTION_KEY
      - OPENAI_API_KEY
      - ANTHROPIC_API_KEY
      - GEMINI_API_KEY
      - RESEND_API_KEY
      - GRAFANA_ADMIN_PASSWORD
      - OAUTH_APPLE_PRIVATE_KEY
      - OAUTH_GITHUB_CLIENT_SECRET
      - OAUTH_GOOGLE_CLIENT_SECRET
      - OAUTH_MICROSOFT_CLIENT_SECRET

  prod:
    doppler_config: prd
    pulumi_stack: prod
    description: Production environment
    secrets: []  # Same as dev, populated during deployment setup

# State backend migration path (Phase 2 -> future):
# 1. Current: file://~/.pulumi-state (local filesystem)
# 2. Future: s3://pulumi-state?endpoint=<garage>&disableSSL=true&s3ForcePathStyle=true
# 3. Migration: pulumi stack export | pulumi stack import (after Garage is deployed)
